server:
  port: 0

spring:

  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest

  application:
    name: payment-service

  cloud:

    stream:
      function:
        definition: pkslowSource
      bindings:
        pkslowSource-out-0:
          destination: pkslow-topic
#        pkslowSink-in-0:
#          destination: pkslow-topic
#      poller:
#        fixed-delay: 500

    consul:
      host: localhost
      port: 8500
      discovery:
        instanceId: ${spring.application.name}:${random.value}
        prefer-ip-address: true
        healthCheckPath: /actuator/health
        healthCheckInterval: 5s


resilience4j.circuitbreaker:
  configs:
    default:
      registerHealthIndicator: true
      slidingWindowSize: 1
      minimumNumberOfCalls: 1
      slidingWindowType: TIME_BASED
      permittedNumberOfCallsInHalfOpenState: 1
      automaticTransitionFromOpenToHalfOpenEnabled: true
      waitDurationInOpenState: 10s
      failureRateThreshold: 10
      eventConsumerBufferSize: 10